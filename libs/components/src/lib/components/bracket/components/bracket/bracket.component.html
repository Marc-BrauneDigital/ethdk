<ng-container *ngIf="_bracket">
  <ng-container *ngFor="let item of _bracket.bracketRounds; trackBy: trackByRound; let roundIndex = index">
    <ng-container *etLet="_bracket.bracketRounds[roundIndex - 1] as lastRound">
      <ng-container *etLet="_bracket.bracketRounds[roundIndex + 1] as nextRound">
        <ng-container *ngFor="let match of item.matches; trackBy: trackByMatch">
          <div
            *ngIf="getConnectedMatches(match) as connectedMatches"
            [style.--_cs]="item.column.start"
            [style.--_ce]="item.column.end"
            [style.--_rs]="match.row.start"
            [style.--_re]="match.row.end"
            [style.--_line-multi-after]="getLineMultiAfter(roundIndex)"
            [attr.et-has-parents]="!!connectedMatches.previousMatches?.length"
            [attr.et-has-child]="!!connectedMatches.nextMatch"
            [attr.et-child-connector-shape]="getChildConnectorShape(match, connectedMatches.nextMatch)"
            [attr.line-span-before]="getLineSpan(lastRound)"
            [attr.line-span-current]="getLineSpan(item)"
            [attr.line-span-after]="getLineSpan(nextRound)"
            class="et-bracket-match"
          >
            {{ match.data.id }}
          </div>
        </ng-container>
      </ng-container>
    </ng-container>
  </ng-container>
</ng-container>
