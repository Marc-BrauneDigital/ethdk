<div #containerElement class="et-combobox-body-container" etAnimatedLifecycle>
  <ng-container *etLet="combobox.options$ | async as options">
    @if (!options?.length && !combobox.error && !combobox.loading) {
      @if (combobox.customBodyEmptyTpl$ | async; as tpl) {
        <ng-container *ngTemplateOutlet="tpl" />
      } @else {
        @if (combobox.customBodyMoreItemsHintComponent$ | async; as comp) {
          <ng-container
            *ngComponentOutlet="comp; inputs: (combobox.customBodyMoreItemsHintComponentInputs$ | async) ?? undefined"
          />
        } @else {
          @if (combobox.bodyMoreItemsHintText) {
            <p class="et-combobox-body--more-items-hint">
              {{ combobox.bodyMoreItemsHintText }}
            </p>
          }
        }
        <ng-template #default>
          @if (combobox.bodyMoreItemsHintText) {
            <p class="et-combobox-body--more-items-hint">
              {{ combobox.bodyMoreItemsHintText }}
            </p>
          }
        </ng-template>
      }
      <ng-template #componentOrNone>
        @if (combobox.customBodyEmptyComponent$ | async; as comp) {
          <ng-container
            *ngComponentOutlet="comp; inputs: (combobox.customBodyEmptyComponentInputs$ | async) ?? undefined"
          />
        } @else {
          #default|
        }
        <ng-template #default>
          <p class="et-combobox-body--empty">{{ combobox._tempEmptyText }}</p>
        </ng-template>
      </ng-template>
    }

    @if (combobox.error && !combobox.loading) {
      @if (combobox.customBodyErrorTpl$ | async; as tpl) {
        <ng-container *ngTemplateOutlet="tpl; context: { error: combobox.error }" />
      } @else {
        #componentOrNone|
      }
      <ng-template #componentOrNone>
        @if (combobox.customBodyErrorComponent$ | async; as comp) {
          <ng-container
            *ngComponentOutlet="comp; inputs: (customErrorComponentInputs$ | async) ?? { error: combobox.error }"
          />
        }
      </ng-template>
    }

    @if (combobox.loading$ | async) {
      @if (combobox.customBodyLoadingTpl$ | async; as tpl) {
        <ng-container *ngTemplateOutlet="tpl" />
      } @else {
        #componentOrNone|
      }
      <ng-template #componentOrNone>
        @if (combobox.customBodyLoadingComponent$ | async; as comp) {
          <ng-container
            *ngComponentOutlet="comp; inputs: (combobox.customBodyLoadingComponentInputs$ | async) ?? undefined"
          />
        }
      </ng-template>
    }

    @if (!combobox.error) {
      @for (option of options; track trackByFn($index, option)) {
        <et-combobox-option [option]="option" />
      }
    }

    @if (options?.length && combobox.showBodyMoreItemsHint) {
      @if (combobox.customBodyMoreItemsHintTpl$ | async; as tpl) {
        <ng-container *ngTemplateOutlet="tpl" />
      } @else {
        #componentOrNone|
      }
      <ng-template #componentOrNone>
        @if (combobox.customBodyMoreItemsHintComponent$ | async; as comp) {
          <ng-container
            *ngComponentOutlet="comp; inputs: (combobox.customBodyMoreItemsHintComponentInputs$ | async) ?? undefined"
          />
        } @else {
          #default|
        }
        <ng-template #default>
          @if (combobox.bodyMoreItemsHintText) {
            <p class="et-combobox-body--more-items-hint">
              {{ combobox.bodyMoreItemsHintText }}
            </p>
          }
        </ng-template>
      </ng-template>
    }
  </ng-container>
</div>
