<div class="et-scrollable-wrapper">
  <div
    #scrollable
    [attr.role]="scrollableRole() ?? undefined"
    [etCursorDragScroll]="cursorDragScroll() && (!isAtStart() || !isAtEnd())"
    [allowedDirection]="direction()"
    (cursorDragStart)="setIsCursorDragging(true)"
    (cursorDragEnd)="setIsCursorDragging(false)"
    class="et-scrollable-container-outer"
  >
    <div #scrollableContainer [ngClass]="scrollableClass()" class="et-scrollable-container">
      <div #firstElement class="et-scroll-observer-first-element" etScrollableIgnoreChild></div>
      <ng-content />
      <div #lastElement class="et-scroll-observer-last-element" etScrollableIgnoreChild></div>
    </div>
  </div>

  @if (renderMasks()) {
    <div class="et-scrollable-masks">
      <div class="et-scrollable-mask et-scrollable-mask--start"></div>
      <div class="et-scrollable-mask et-scrollable-mask--end"></div>
    </div>
  }

  @if (renderButtonsInside()) {
    <div class="et-scrollable-buttons">
      <ng-container *ngTemplateOutlet="forwardButtonTpl" />
      <ng-container *ngTemplateOutlet="backwardButtonTpl" />
    </div>
  }
</div>

@if (renderButtonsInFooter() || (renderNavigation() && scrollableNavigation().length > 1)) {
  <div
    [ngClass]="{
      'et-scrollable-footer--with-navigation': renderNavigation(),
      'et-scrollable-footer--with-buttons': renderButtonsInFooter()
    }"
    class="et-scrollable-footer"
    aria-hidden="true"
  >
    @if (renderButtonsInFooter()) {
      <ng-container *ngTemplateOutlet="forwardButtonTpl" />
    }

    @if (renderNavigation()) {
      @for (item of scrollableNavigation(); track i; let i = $index) {
        <button
          [class.et-scrollable-navigation-item--active]="item.current"
          [class.et-scrollable-navigation-item--close]="item.explicitType === 'page-number-close'"
          [class.et-scrollable-navigation-item--far]="item.explicitType === 'page-number-far'"
          (click)="scrollToElementViaNavigation(item.page - 1)"
          class="et-scrollable-navigation-item"
          type="button"
          tabindex="-1"
          aria-hidden="true"
        ></button>
      }
    }

    @if (renderButtonsInFooter()) {
      <ng-container *ngTemplateOutlet="backwardButtonTpl" />
    }
  </div>
}

<ng-template #forwardButtonTpl>
  <button
    [disabled]="isAtStart()"
    (click)="scrollToStartDirection()"
    class="et-scrollable-button et-scrollable-button--start"
    aria-hidden="true"
    type="button"
    tabindex="-1"
  >
    <et-chevron-icon />
  </button>
</ng-template>

<ng-template #backwardButtonTpl>
  <button
    [disabled]="isAtEnd()"
    (click)="scrollToEndDirection()"
    class="et-scrollable-button et-scrollable-button--end"
    aria-hidden="true"
    type="button"
    tabindex="-1"
  >
    <et-chevron-icon />
  </button>
</ng-template>
